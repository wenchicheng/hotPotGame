<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hotpotGame</title>
  <!-- 自己的外部樣式表 -->
  <link rel="stylesheet" href="./css/style.css">

</head>

<body>
  <div class="container">

    <div id="startScreen">
      <div class="intro">
        <div class="logo" style="margin: auto; scale: 0.7;"></div>
        - 玩 法 說 明 -<br>
        在 30 秒內，玩家需快速蒐集各種不同熱量食材，火鍋料將會再隨機加到湯底中<br>
        贏得更多熱量讓自己成為「 最佳大胃王 」！
        <br>享受火鍋美味的同時，別忘了留意倒數計時，等你來挑戰！！<br>
        <div style="font-size: 1rem;color: #ad977d; margin-bottom: 8px;">目前最高熱量紀錄： <span id="text-hsscore">0</span> 大卡
        </div>
        <div class="listTitle">熱 量 表</div>
        <div class="listIntro">
          <div class="calListIntro">
            <table>
              <!-- 品項、熱量 -->
              <tr>
                <td>品項</td>
                <td>豬肉片</td>
                <td>牛肉片</td>
                <td>高麗菜</td>
                <td>青江菜</td>
                <td>玉米塊</td>
                <td>白蘿蔔</td>
                <td>番茄</td>
                <td>蝦子</td>
                <td>魷魚圈</td>
                <td>油豆腐</td>
                <td>竹輪</td>
                <td>香菇</td>
                <td>皮蛋</td>
                <td>福袋</td>
              </tr>
              <tr>
                <td>食材</td>
                <!-- 豬肉片 -->
                <td><img src="./image/pork.png"></td>
                <!-- 牛肉片 -->
                <td><img src="./image/beef.png"></td>
                <!-- 高麗菜 -->
                <td><img src="./image/cabbage.png"></td>
                <!-- 青江菜 -->
                <td><img src="./image/komatsuna.png"></td>
                <!-- 玉米塊 -->
                <td><img src="./image/corn_wagiri.png"></td>
                <!-- 白蘿蔔 -->
                <td><img src="./image/daikon.png"></td>
                <!-- 番茄 -->
                <td><img src="./image/tomato_red.png"></td>
                <!-- 蝦子 -->
                <td><img src="./image/ebi.png"></td>
                <!-- 魷魚圈 -->
                <td><img src="./image/ika_ring.png"></td>
                <!-- 油豆腐 -->
                <td><img src="./image/atsuage.png"></td>
                <!-- 竹輪 -->
                <td><img src="./image/chikuwa.png"></td>
                <!-- 香菇 -->
                <td><img src="./image/shitake.png"></td>
                <!-- 皮蛋 -->
                <td><img src="./image/egg_pitan.png"></td>
                <!-- 福袋 -->
                <td><img src="./image/mochikinchaku.png"></td>
              </tr>
              <tr>
                <td>熱量</td>
                <td>180</td>
                <td>120</td>
                <td>23</td>
                <td>10</td>
                <td>40</td>
                <td>8</td>
                <td>18</td>
                <td>20</td>
                <td>10</td>
                <td>110</td>
                <td>50</td>
                <td>3</td>
                <td>120</td>
                <td>88</td>
              </tr>

            </table>
          </div>
        </div>
        <div>
          <button id="startButton"><span>開始撈！</span><span>準備好了嗎？</span></button>
        </div>
      </div>
    </div>

    <div class="window">
      <!-- 左區------------------- -->
      <div class="left">
        <!-- ＬＯＧＯ------------------- -->
        <div class="logo"></div>
        <!-- 熱量 -->
        <div class="totalCal">
          <div>熱量： <span id="text-score">0</span>大卡</div>
          <div>剩餘： <span id="text-time">0</span>秒</div>
        </div>
        <!-- 卡洛里表------------------- -->
        <div class="calList">
          <table>
            <tr>
              <th>品項</th>
              <th>熱量</th>
              <th>品項</th>
              <th>熱量</th>
            </tr>
            <tr>
              <!-- 豬肉片 -->
              <td><img width="40%" src="./image/pork.png"></td>
              <td>180</td>
              <!-- 牛肉片 -->
              <td><img width="40%" src="./image/beef.png"></td>
              <td>120</td>
            </tr>
            <tr>
              <!-- 高麗菜 -->
              <td><img width="40%" src="./image/cabbage.png"></td>
              <td>23</td>
              <!-- 青江菜 -->
              <td><img width="40%" src="./image/komatsuna.png"></td>
              <td>10</td>
            </tr>
            <tr>
              <!-- 玉米塊 -->
              <td><img width="40%" src="./image/corn_wagiri.png"></td>
              <td>40</td>
              <!-- 白蘿蔔 -->
              <td><img width="40%" src="./image/daikon.png"></td>
              <td>8</td>
            </tr>
            <tr>
              <!-- 蝦子 -->
              <td><img width="40%" src="./image/ebi.png"></td>
              <td>20</td>
              <!-- 魷魚圈 -->
              <td><img width="40%" src="./image/ika_ring.png"></td>
              <td>10</td>
            </tr>
            <tr>
              <!-- 油豆腐 -->
              <td><img width="40%" src="./image/atsuage.png"></td>
              <td>110</td>
              <!-- 竹輪 -->
              <td><img width="40%" src="./image/chikuwa.png"></td>
              <td>50</td>
            </tr>
            <tr>
              <!-- 香菇 -->
              <td><img width="40%" src="./image/shitake.png"></td>
              <td>3</td>
              <!-- 皮蛋 -->
              <td><img width="40%" src="./image/egg_pitan.png"></td>
              <td>120</td>
            </tr>
            <tr>
              <!-- 福袋 -->
              <td><img width="40%" src="./image/mochikinchaku.png"></td>
              <td>88</td>
              <!-- 番茄 -->
              <td><img width="40%" src="./image/tomato_red.png"></td>
              <td>18</td>
            </tr>

          </table>
        </div>
        <!-- 表尾------------------- -->
        <div class="footer">
          <!-- <p>最高分玩家: <span id="text-hsname">-</span></p> -->
          <div>目前最高熱量紀錄： <span id="text-hsscore">0</span> 大卡</div>
        </div>
      </div>
      <!-- 右區------------------- -->
      <div class="right">
        <!-- 右區遊戲主畫面------------------- -->
        <div id="game-window">
          <!-- <img id="" src="./image/hotpot.svg"> -->
          <!-- <input type="button" value="開始" id="btn-start">
          <input type="button" value="說明" id="btn-Instructions"> -->
        </div>
      </div>
    </div>
  </div>
  <!-- jquery -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js'
    integrity='sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=='
    crossorigin='anonymous'></script>
  <!-- sweet alert -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.10.1/sweetalert2.all.min.js'
    integrity='sha512-1SVc8wK7Y/XRAKRKfP09ILQmzJGwqq6m66x6mWa7r36j+/fa+3kz46s8kvELsGc52yo1as48nneFic7BZKMu8Q=='
    crossorigin='anonymous'></script>

  <script>

    // 開始遊戲按鈕
    $('#startButton').on('click', function () {
      $('#startScreen').hide();
      // $('.window').show();
    });


    // 目前分數
    let score = 0
    // 剩餘秒數
    let time = 0
    // 計時器
    let timer = 0
    // 最高分
    const hs = {
      name: '-',
      score: 0
    }

    // 判斷 data 最高分紀錄
    if (localStorage.hs) {
      const data = JSON.parse(localStorage.hs)
      // hs.name = data.name
      hs.score = data.score
      // $('#text-hsname').text(hs.name)
      $('#text-hsscore').text(hs.score)
    }

    // 點擊開始----------------------------------------------

    $('#startButton').click(function () {
      // 停用按鈕
      $(this).attr('disabled', true);
      $('#btn-Instructions').attr('disabled', true);

      // 隱藏按鈕
      $(this).hide();
      $('#btn-Instructions').hide();
      // 重設
      score = 0
      $('#text-score').text(score)
      time = 30
      $('#text-time').text(time)
      // 因為 setInterval 裡的 this 會指向 window，而不是點到的按鈕，所以先把 this 存起來
      const _this = this



      // 開始遊戲--------------------------------------------------

      timer = setInterval(function () {
        // 倒數
        time--
        $('#text-time').text(time)


        // 產生火鍋料----------------------------------------
        // 隨機數字 1~10 ，如果隨機數字大於 3 且食材的數量小於 3
        const random = Math.ceil(Math.random() * 10)
        if (random > 3 && $('.food').length < 15) {

          // 隨機位置
          const top = Math.round(Math.random() * 50) + '%'
          const left = Math.round(Math.random() * 50) + '%'
          const deg = Math.round(Math.random() * 30) + 'deg'

          // 宣告-------
          // const tomato = $(`<img src="image/tomato_red.png" class="tomato food" style="top: ${top}; left: ${left}">`)
          // 番茄
          const tomato =
            $(`<img src="image/tomato_red.png" 
          class="tomato food" style="top: ${top}; left: ${left}; width: 80px;height: auto;
          transform: rotate(${deg});">`);

          // 蘿蔔
          const daikon =
            $(`<img src="image/daikon.png" 
          class="daikon food" style="top: ${top}; left: ${left}; width: 70px;height: auto;
          transform: rotate(${deg});">`);

          // 蝦子
          const ebi =
            $(`<img src="image/ebi.png" 
          class="ebi food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 油豆腐
          const atsuage =
            $(`<img src="image/atsuage.png" 
          class="atsuage food" style="top: ${top}; left: ${left}; width: 80px;height: auto;
          transform: rotate(${deg});">`);

          // 竹輪
          const chikuwa =
            $(`<img src="image/chikuwa.png" 
          class="chikuwa food" style="top: ${top}; left: ${left}; width: 80px;height: auto;
          transform: rotate(${deg});">`);

          // 香菇
          const shitake =
            $(`<img src="image/shitake.png" 
          class="shitake food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 魷魚圈
          const ika =
            $(`<img src="image/ika_ring.png" 
          class="ika food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 福袋
          const mochikinchaku =
            $(`<img src="image/mochikinchaku.png" 
          class="mochikinchaku food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 高麗菜
          const cabbage =
            $(`<img src="image/cabbage.png" 
          class="cabbage food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 玉米
          const corn =
            $(`<img src="image/corn_wagiri.png" 
          class="corn food" style="top: ${top}; left: ${left}; width: 70px;height: auto;
          transform: rotate(${deg});">`);

          // 青江菜
          const komatsuna =
            $(`<img src="image/komatsuna.png" 
          class="komatsuna food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 豬肉片
          const pork =
            $(`<img src="image/pork.png" 
          class="pork food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);

          // 牛肉片
          const beef =
            $(`<img src="image/beef.png" 
          class="beef food" style="top: ${top}; left: ${left}; width: 90px;height: auto;
          transform: rotate(${deg});">`);


          $('#game-window').append(tomato, daikon, ebi, atsuage, chikuwa, shitake, ika, mochikinchaku, cabbage, corn, komatsuna, pork, beef);
          move(tomato);
          move(daikon);
          move(ebi);
          move(atsuage);
          move(chikuwa);
          move(shitake);
          move(ika);
          move(mochikinchaku);
          move(cabbage);
          move(corn);
          move(komatsuna);
          move(pork);
          move(beef);
        }


        // 如果時間到了----------------------------------------------
        if (time === 0) {
          clearInterval(timer)
          // 重新啟用按鈕
          $(_this).attr('disabled', false)
          // 清空遊戲區域
          // .empty() 會把裡面的子元素都刪掉
          $('#game-window').empty()
          // $('btn-start', 'btn-Instructions').show()


          function getScoreMessage(score) {
            if (score > 1500) {
              return `太厲害啦！獲得 ${score} 大卡，最強大胃王非你莫屬！`;
            } else if (score > 1200) {
              return `獲得 ${score} 大卡，隱藏大胃王是你！`;
            } else if (score > 700) {
              return `獲得 ${score} 大卡，撈得太客氣了吧~~`;
            } else {
              return `獲得 ${score} 大卡，是在飲食控制？ ^_^`;
            }
          }


          Swal.fire({
            title: "時間到！",
            text: getScoreMessage(score),
            imageUrl: "./image/soup_vegetable.png",
            imageWidth: 400,
            imageHeight: 361,
            imageAlt: "嗨",
            allowOutsideClick: false,
            // 不允許點擊外面關閉對話框
            confirmButtonText: "再玩一次",

          }).then(function (result) {
            hs.score = score
            $('#text-hsscore').text(hs.score)

            // localStorage.名稱 = 文字
            localStorage.hs = JSON.stringify(hs)

            // 清空遊戲區域
            $('#game-window').empty();

            // 重新整理網頁
            location.reload();
          })

        }
      }, 1000)
      //  產生食材的秒數
    })


    // 點擊-------------------------------------------------------

    // 點擊後停止動作 + 分數
    // 番茄
    $('#game-window').on('click', '.tomato', function () {
      $(this).stop()
      // $(this).attr('src', './image/ebi_aka.png')
      $(this).removeClass('tomato food').addClass('clicked')
      score += 18
      $('#text-score').text(score)
    })

    // 蘿蔔
    $('#game-window').on('click', '.daikon', function () {
      $(this).stop()
      $(this).removeClass('daikon food').addClass('clicked')
      score += 8
      $('#text-score').text(score)
    })

    // 蝦子
    $('#game-window').on('click', '.ebi', function () {
      $(this).stop()
      $(this).removeClass('ebi food').addClass('clicked')
      score += 20
      $('#text-score').text(score)
    })

    // 油豆腐
    $('#game-window').on('click', '.atsuage', function () {
      $(this).stop()
      $(this).removeClass('atsuage food').addClass('clicked')
      score += 100
      $('#text-score').text(score)
    })

    // 竹輪
    $('#game-window').on('click', '.chikuwa', function () {
      $(this).stop()
      $(this).removeClass('chikuwa food').addClass('clicked')
      score += 50
      $('#text-score').text(score)
    })

    // 香菇
    $('#game-window').on('click', '.shitake', function () {
      $(this).stop()
      $(this).removeClass('shitake food').addClass('clicked')
      score += 3
      $('#text-score').text(score)
    })

    // 魷魚圈
    $('#game-window').on('click', '.ika', function () {
      $(this).stop()
      $(this).removeClass('ika food').addClass('clicked')
      score += 10
      $('#text-score').text(score)
    })

    // 福袋
    $('#game-window').on('click', '.mochikinchaku', function () {
      $(this).stop()
      $(this).removeClass('mochikinchaku food').addClass('clicked')
      score += 88
      $('#text-score').text(score)
    })

    // 高麗菜
    $('#game-window').on('click', '.cabbage', function () {
      $(this).stop()
      $(this).removeClass('cabbage food').addClass('clicked')
      score += 23 // 100g
      $('#text-score').text(score)
    })

    // 玉米
    $('#game-window').on('click', '.corn', function () {
      $(this).stop()
      $(this).removeClass('corn food').addClass('clicked')
      score += 40
      $('#text-score').text(score)
    })

    // 青江菜
    $('#game-window').on('click', '.komatsuna', function () {
      $(this).stop()
      $(this).removeClass('komatsuna food').addClass('clicked')
      score += 10 // 100g
      $('#text-score').text(score)
    })

    // 豬肉片
    $('#game-window').on('click', '.pork', function () {
      $(this).stop()
      $(this).removeClass('pork food').addClass('clicked')
      score += 180 // 100g
      $('#text-score').text(score)
    })

    // 牛肉片
    $('#game-window').on('click', '.beef', function () {
      $(this).stop()
      $(this).removeClass('beef food').addClass('clicked')
      score += 120 // 100g
      $('#text-score').text(score)
    })


    // 隨機位置-------------------------------------------
    function move(food) {
      const top = Math.round(Math.random() * 100) + '%'
      const left = Math.round(Math.random() * 100) + '%'
      food.animate({ top, left }, 1000, function () {
        move(food)
      })
    }



    // function move(tomato) {
    //   const top = Math.round(Math.random() * 100) + '%'
    //   const left = Math.round(Math.random() * 100) + '%'
    //   tomato.animate({ top, left }, 2000, function () {
    //     move(tomato)
    //   })
    // }
  </script>
</body>

</html>